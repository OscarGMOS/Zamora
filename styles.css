
:root{ --bg:#0b132b; --fg:#edf2f4; --muted:#a9b2c3; --card:#1c2541; --primary:#2a9d8f; }
*{box-sizing:border-box}
html,body{margin:0;padding:0;height:100%}
body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial,sans-serif; color:var(--fg); background:var(--bg); display:flex; flex-direction:column}

.skip-link{
  position:absolute;
  top:0;
  left:0;
  transform:translateY(-120%);
  background:#fff;
  color:#111;
  padding:.6rem 1rem;
  border-radius:.4rem;
  z-index:1000;
  text-decoration:none;
}
.skip-link:focus,
.skip-link:focus-visible{
  transform:translateY(0);
  outline:3px solid #f4a261;
}

.hero{display:grid;place-items:center;min-height:60vh;background:linear-gradient(120deg,#14213d 0%,#1f2a48 100%);text-align:center;padding:2rem;flex-shrink:0}
.hero__inner{max-width:900px}
.lead{color:var(--muted)}
.btn{border:1px solid currentColor;background:transparent;color:var(--fg);padding:.6rem 1rem;border-radius:.6rem;cursor:pointer;transition:all .3s ease}
.btn:hover{background:rgba(255,255,255,.08)}
.btn:focus,
.btn:focus-visible,
a:focus,
a:focus-visible,
summary:focus,
summary:focus-visible{
  outline:3px solid #f4a261;
  outline-offset:2px;
}
.btn.active{background:var(--primary);border-color:var(--primary);color:#021}
.btn--primary{background:var(--primary);border-color:var(--primary);color:#021}
.btn--primary:hover{filter:brightness(1.1)}
.btn--ghost{border-color:var(--muted);color:var(--muted)}

.scrolly{display:grid;grid-template-columns: 1.2fr 1fr;gap:1.2rem;align-items:start;max-width:1200px;margin:0 auto;padding:2rem;flex:1}
.figure{position:sticky; top:1rem; height:calc(100vh - 2rem); display:flex; flex-direction:column; gap:1rem; max-height:100vh; transition:opacity .4s ease, transform .4s ease}
.map{flex:1; min-height:320px; border-radius:.8rem; overflow:hidden; border:1px solid #2c365e}
.fallback{display:grid;place-items:center;background:#0e1a33;color:#9fb3c8;border-radius:.8rem;border:1px dashed #345}

/* Mapa de referencia */
.map-reference {
  display: flex;
  flex-direction: column;
  gap: 0.8rem;
  background: var(--card);
  border: 1px solid #243b6b;
  border-radius: 0.8rem;
  padding: 0.8rem;
  flex: 1;
  transition: box-shadow .3s ease, transform .3s ease, background-color .3s ease, border-color .3s ease;
}

.map-reference h3 {
  margin: 0;
  font-size: 0.95rem;
  color: var(--fg);
  text-align: center;
  font-weight: 600;
}

.map-reference__subtitle {
  margin: 0.2rem 0 0.4rem 0;
  padding: 0;
  font-size: 0.8rem;
  color: var(--muted);
  text-align: center;
  font-style: italic;
}

.map-reference__hint {
  margin: 0;
  padding: 0.4rem 0;
  font-size: 0.75rem;
  color: var(--muted);
  text-align: center;
  font-style: italic;
}

.map-reference__container {
  flex: 1;
  max-height: 60vh;
  aspect-ratio: 3 / 4;
  border-radius: 0.6rem;
  overflow: hidden;
  border: 1px solid #345;
  background: #e9ecef;
  position: relative;
  z-index: 1;
  transition: border-color .3s ease, box-shadow .3s ease;
}

.map-reference__legend {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  padding: 0.6rem;
  background: rgba(0, 0, 0, 0.15);
  border-radius: 0.4rem;
  font-size: 0.8rem;
  transition: background-color .3s ease, transform .3s ease;
}

.legend-item {
  display: flex;
  align-items: center;
  gap: 0.6rem;
  color: var(--muted);
  line-height: 1.2;
}

.legend-dot {
  width: 0.7rem;
  height: 0.7rem;
  border-radius: 50%;
  flex-shrink: 0;
}


.thermo{background:var(--card); border:1px solid #243b6b; border-radius:.8rem; padding:.8rem}
.thermo h3{margin:.2rem 0 .6rem 0}
/* Marco del gauge */ 
.thermo__embed { position: relative; 
                width: 100%; 
                height: 260px; 
/* Ajusta este valor según lo que quieras */ 
                overflow: hidden; } 
/* Forzar al iframe interno de Flourish a ocupar el marco */ 
.thermo__embed .flourish-embed, .thermo__embed .flourish-embed iframe { position: absolute !important; 
                                                                        inset: 0 !important; 
                                                                        width: 100% !important; 
                                                                        height: 100% !important; 
                                                                        max-width: 100% !important; 
                                                                        max-height: 100% !important; 
                                                                        border: none !important; }
.legend{list-style:none;margin:.6rem 0 0 0;padding:0;display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:.2rem .8rem;font-size:.9rem;color:var(--muted)}
.legend .dot{display:inline-block;width:.8rem;height:.8rem;border-radius:50%;background:var(--c);margin-right:.4rem}

.article{display:flex;flex-direction:column;gap:40vh}
.step{background:var(--card); border:1px solid #243b6b; padding:1rem .8rem; border-radius:.8rem; box-shadow:0 5px 25px rgba(0,0,0,.15)}
.step #thermo { width: 100%; height: 600px; overflow: hidden; border-radius: .6rem; }
.step h2{margin-top:.2rem}
.hint{color:var(--muted);font-size:.95rem}
.controls{margin-top:.8rem;display:flex;gap:.6rem;align-items:center}
.controls input[type=range]{width:240px}
.note{color:var(--muted)}
.poll{display:flex;flex-direction:column;gap:.6rem}
.poll__results{margin-top:1rem;color:var(--muted)}
.poll__results summary {
  cursor: pointer;
  padding: 0.8rem;
  background: var(--card);
  border: 1px solid #243b6b;
  border-radius: 0.6rem;
  font-weight: 600;
  color: var(--primary);
  transition: all 0.3s ease;
}
.poll__results summary:hover {
  background: rgba(42, 157, 143, 0.1);
}
.poll__results[open] summary {
  border-bottom-left-radius: 0;
  border-bottom-right-radius: 0;
}
.results-content {
  padding: 1rem;
  background: var(--card);
  border: 1px solid #243b6b;
  border-top: none;
  border-radius: 0 0 0.6rem 0.6rem;
}

/* Estilos para el embed de Flourish en pantalla completa */
.flourish-embed { width: 100%; height: 100%; }
.flourish-embed iframe { width: 100% !important; height: 100% !important; }


.footer {
  background-color: #0b132b; /* Fondo oscuro */
  color: #edf2f4;           /* Texto claro */
  font-size: 0.85rem;       /* Tamaño reducido */
  text-align: center;
  padding: 1rem 1.5rem;
  border-top: 1px solid #2c365e; /* Línea superior sutil */
  flex-shrink: 0;
  margin-top: 3rem;
  position: relative;
  z-index: 10;
}
.footer a {
  color: #2a9d8f;           /* Color de enlaces (verde azulado) */
  text-decoration: none;
  font-weight: 500;
  }
.footer a:hover {
  text-decoration: underline;
  color: #ef233c;           /* Color hover (rojo coral) */
}
.footer p {
  margin: 0;
  line-height: 1.4;
}

/* Imágenes en steps */
.step img {
  width: 100%;
  height: auto;
  max-width: 500px;
  margin: 1.5rem 0;
  border-radius: .8rem;
  box-shadow: 0 4px 12px rgba(0,0,0,.15);
  display: block;
}


/* Ajuste específico para el step del vídeo */
.step[data-step="timeline"]{
  padding-bottom: 0;
}
.step[data-step="timeline"] .video-wrapper{
  margin-bottom: 0 !important;
}
.step[data-step="timeline"] .video-wrapper iframe{
  display: block;
}

/* Responsive */
@media (max-width: 980px){
  .scrolly{grid-template-columns:1fr}
  .figure{order:2; position:relative; top:0; height:auto}
  .article{order:1; gap:40vh}
}

/* Tablet (768px–1024px) */
@media (max-width: 1024px){
  .hero{min-height:50vh;padding:1.5rem}
  .hero__inner{max-width:720px}
  .scrolly{grid-template-columns:1fr;gap:1rem;padding:1.5rem}
  .figure{order:2; position:relative; top:0; height:auto}
  .map-reference{padding:0.7rem}
  .map-reference__container{max-height:50vh}
  .article{order:1; gap:32vh}
  .step{padding:0.9rem .8rem}
  .controls{flex-wrap:wrap}
}

/* Móvil (<=767px) */
@media (max-width: 767px){
  body{font-size:16px}
  .hero{min-height:45vh;padding:1.2rem}
  .hero h1{font-size:1.6rem;line-height:1.2}
  .lead{font-size:0.95rem}
  .btn{padding:.55rem .85rem}
  .scrolly{grid-template-columns:1fr;gap:0.8rem;padding:1rem}
  .figure{order:2; position:relative; top:0; height:auto}
  .map-reference{padding:0.6rem}
  .map-reference__container{max-height:45vh;aspect-ratio: 4 / 3}
  .map-reference__legend{font-size:0.75rem}
  .article{order:1; gap:26vh}
  .step{padding:0.8rem .7rem}
  .step img{max-width:100%;margin:1rem 0}
  .controls{flex-direction:column;align-items:stretch}
  .controls .btn{width:100%}
  .video-wrapper iframe{height:280px}
  #thermo{height:420px !important}
  #scenarios{height:420px !important}
  .footer{padding:0.8rem 1rem}
}
